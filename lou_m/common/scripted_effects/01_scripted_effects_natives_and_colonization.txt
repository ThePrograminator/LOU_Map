# Scripted effects for Native Americans


add_permanent_claims_for_federation_nation = {
	# ORIGINAL = Original Tag
	# TAG = New Tag
	capital_scope = {
		region = {
			limit = {
				NOT = { owned_by = $ORIGINAL$ }
			}
			add_permanent_claim = $TAG$
		}
	}
}

swap_federation_idea_group = {
	if = {
		limit = { has_custom_ideas = no }
		country_event = { id = ideagroups.1 } #Swap Ideas
	}
}

#Supports the following trade goods		Base prices
# grain									2.5
# wine									2.5
# wool									2.5
# cloth									3
# fish									2.5
# fur									2
# salt									3
# naval_supplies						2
# copper								3
# gold									10	#Technically 0, but let us calculate with 10
# iron									3
# slaves								2
# ivory									4
# tea									3
# chinaware								3
# spices								3
# coffee								3
# cotton								3
# sugar									3
# tobacco								3
# cocoa									4
# silk									4
# dyes									4
# tropical_wood							2
# livestock								2
# incense								2.5
# glass									3
# paper									3.5
# gems									4
# coal									10
# cloves								8
# unknown								0	#Special and should not count

determine_value_of_trade_goods_grain = {
	set_variable = {
		which = base_value_grain
		value = 2.5
	}
	if = {
		limit = {
			has_chance_scaling_cost = yes
		}
		set_variable = {
			which = chance_modifier_grain
			value = 1
		}
		if = {
			limit = {
				ROOT = {
					OR = {
						has_terrain = mountain
						has_terrain = coastal_desert
						has_terrain = forest
						has_terrain = woods
						has_terrain = hills
						has_terrain = jungle
					}
				}
			}
			multiply_variable = {
				which = chance_modifier_grain
				value = 0.15
			}
		}
		if = {
			limit = {
				ROOT = {
					OR = {
						has_terrain = highlands
						has_terrain = marsh
					}
				}
			}
			multiply_variable = {
				which = chance_modifier_grain
				value = 0.25
			}
		}
		if = {
			limit = {
				ROOT = {
					OR = {
						has_climate = arid
						has_climate = tropical
					}
				}
			}
			multiply_variable = {
				which = chance_modifier_grain
				value = 0.25
			}
		}
		if = {
			limit = {
				ROOT = {
					OR = {
						has_terrain = drylands
						has_terrain = savannah
						has_terrain = steppe
					}
				}
			}
			multiply_variable = {
				which = chance_modifier_grain
				value = 0.6
			}
		}
		if = {
			limit = {
				ROOT = {
					has_winter = severe_winter
				}
			}
			multiply_variable = {
				which = chance_modifier_grain
				value = 0.35
			}
		}
		if = {
			limit = {
				ROOT = {
					has_winter = normal_winter
				}
			}
			multiply_variable = {
				which = chance_modifier_grain
				value = 0.5
			}
		}
		if = {
			limit = {
				ROOT = {
					has_terrain = farmlands
				}
			}
			multiply_variable = {
				which = chance_modifier_grain
				value = 1.5
			}
		}
		if = {
			limit = {
				OR = {
					has_increased_trade_goods_discovery = { trade_goods = grain }
					colonial_parent = { has_increased_trade_goods_discovery = { trade_goods = grain } }
				}
			}
			multiply_variable = {
				which = chance_modifier_grain
				value = 2
			}
		}
		if = {
			limit = {
				NOT = {
					is_variable_equal = {
						which = chance_modifier_grain
						value = 0
					}
				}
			}
			divide_variable = {
				which = base_value_grain
				which = chance_modifier_grain
			}
		}
	}
}
determine_value_of_trade_goods_wine = {
	set_variable = {
		which = base_value_wine
		value = 2.5
	}
	if = {
		limit = {
			has_chance_scaling_cost = yes
		}
		set_variable = {
			which = chance_modifier_wine
			value = 1
		}
		if = {
			limit = {
				ROOT = {
					has_winter = normal_winter
				}
			}
			multiply_variable = {
				which = chance_modifier_wine
				value = 0.25
			}
		}
		if = {
			limit = {
				ROOT = {
					has_terrain = farmlands
				}
			}
			multiply_variable = {
				which = chance_modifier_wine
				value = 1.25
			}
		}
		if = {
			limit = {
				ROOT = {
					OR = {
						has_terrain = hills
						has_terrain = highlands
					}
				}
			}
			multiply_variable = {
				which = chance_modifier_wine
				value = 1.25
			}
		}
		if = {
			limit = {
				OR = {
					has_increased_trade_goods_discovery = { trade_goods = wine }
					colonial_parent = { has_increased_trade_goods_discovery = { trade_goods = wine } }
				}
			}
			multiply_variable = {
				which = chance_modifier_wine
				value = 2
			}
		}
		if = {
			limit = {
				NOT = {
					is_variable_equal = {
						which = chance_modifier_wine
						value = 0
					}
				}
			}
			divide_variable = {
				which = base_value_wine
				which = chance_modifier_wine
			}
		}
	}
}
determine_value_of_trade_goods_wool = {
	set_variable = {
		which = base_value_wool
		value = 2.5
	}
	if = {
		limit = {
			has_chance_scaling_cost = yes
		}
		set_variable = {
			which = chance_modifier_wool
			value = 1
		}
		if = {
			limit = {
				ROOT = {
					OR = {
						has_terrain = grasslands
						has_terrain = hills
						has_terrain = forest
						has_terrain = woods
					}
				}
			}
			multiply_variable = {
				which = chance_modifier_wool
				value = 0.15
			}
		}
		if = {
			limit = {
				ROOT = {
					OR = {
						has_terrain = desert
						has_terrain = savannah
						has_terrain = highlands
						has_terrain = drylands
						has_climate = arid
					}
				}
			}
			multiply_variable = {
				which = chance_modifier_wool
				value = 1.25
			}
		}
		if = {
			limit = {
				OR = {
					has_increased_trade_goods_discovery = { trade_goods = wool }
					colonial_parent = { has_increased_trade_goods_discovery = { trade_goods = wool } }
				}
			}
			multiply_variable = {
				which = chance_modifier_wool
				value = 2
			}
		}
		if = {
			limit = {
				NOT = {
					is_variable_equal = {
						which = chance_modifier_wool
						value = 0
					}
				}
			}
			divide_variable = {
				which = base_value_wool
				which = chance_modifier_wool
			}
		}
	}
}
determine_value_of_trade_goods_cloth = {
	set_variable = {
		which = base_value_cloth
		value = 3
	}
	if = {
		limit = {
			has_chance_scaling_cost = yes
		}
		set_variable = {
			which = chance_modifier_cloth
			value = 1
		}
		if = {
			limit = {
				ROOT = {
					development_discounting_tribal = 12
				}
			}
			multiply_variable = {
				which = chance_modifier_cloth
				value = 2
			}
		}
		if = {
			limit = {
				OR = {
					has_increased_trade_goods_discovery = { trade_goods = cloth }
					colonial_parent = { has_increased_trade_goods_discovery = { trade_goods = cloth } }
				}
			}
			multiply_variable = {
				which = chance_modifier_cloth
				value = 2
			}
		}
		if = {
			limit = {
				NOT = {
					is_variable_equal = {
						which = chance_modifier_cloth
						value = 0
					}
				}
			}
			divide_variable = {
				which = base_value_cloth
				which = chance_modifier_cloth
			}
		}
	}
}
determine_value_of_trade_goods_fish = {
	set_variable = {
		which = base_value_fish
		value = 2.5
	}
	if = {
		limit = {
			has_chance_scaling_cost = yes
		}
		set_variable = {
			which = chance_modifier_fish
			value = 1
		}
		if = {
			limit = {
				ROOT = {
					OR = {
						has_terrain = coastline
						has_terrain = coastal_desert
					}
				}
			}
			multiply_variable = {
				which = chance_modifier_fish
				value = 1.1
			}
		}
		if = {
			limit = {
				ROOT = {
					has_terrain = glacier
				}
			}
			multiply_variable = {
				which = chance_modifier_fish
				value = 1.2
			}
		}
		if = {
			limit = {
				OR = {
					has_increased_trade_goods_discovery = { trade_goods = fish }
					colonial_parent = { has_increased_trade_goods_discovery = { trade_goods = fish } }
				}
			}
			multiply_variable = {
				which = chance_modifier_fish
				value = 2
			}
		}
		if = {
			limit = {
				NOT = {
					is_variable_equal = {
						which = chance_modifier_fish
						value = 0
					}
				}
			}
			divide_variable = {
				which = base_value_fish
				which = chance_modifier_fish
			}
		}
	}
}
determine_value_of_trade_goods_fur = {
	set_variable = {
		which = base_value_fur
		value = 2
	}
	if = {
		limit = {
			has_chance_scaling_cost = yes
		}
		set_variable = {
			which = chance_modifier_fur
			value = 1
		}
		if = {
			limit = {
				ROOT = {
					OR = {
						has_terrain = savannah
						has_terrain = grasslands
						has_terrain = highlands
					}
					has_winter = mild_winter
				}
			}
			multiply_variable = {
				which = chance_modifier_fur
				value = 0.75
			}
		}
		if = {
			limit = {
				ROOT = {
					NOT = { native_size = 1 }
				}
			}
			multiply_variable = {
				which = chance_modifier_fur
				value = 0.5
			}
		}
		if = {
			limit = {
				ROOT = {
					native_size = 1
				}
			}
			multiply_variable = {
				which = chance_modifier_fur
				value = 2
			}
		}
		if = {
			limit = {
				ROOT = {
					has_terrain = forest
				}
			}
			multiply_variable = {
				which = chance_modifier_fur
				value = 1.5
			}
		}
		if = {
			limit = {
				ROOT = {
					has_winter = normal_winter
				}
			}
			multiply_variable = {
				which = chance_modifier_fur
				value = 1.6
			}
		}
		if = {
			limit = {
				ROOT = {
					has_winter = severe_winter
					NOT = { has_terrain = glacier }
				}
			}
			multiply_variable = {
				which = chance_modifier_fur
				value = 2.5
			}
		}
		if = {
			limit = {
				has_country_flag = encourage_cash_crops_flag
			}
			multiply_variable = {
				which = chance_modifier_fur
				value = 2
			}
		}
		if = {
			limit = {
				OR = {
					has_increased_trade_goods_discovery = { trade_goods = fur }
					colonial_parent = { has_increased_trade_goods_discovery = { trade_goods = fur } }
				}
			}
			multiply_variable = {
				which = chance_modifier_fur
				value = 2
			}
		}
		if = {
			limit = {
				NOT = {
					is_variable_equal = {
						which = chance_modifier_fur
						value = 0
					}
				}
			}
			divide_variable = {
				which = base_value_fur
				which = chance_modifier_fur
			}
		}
	}
}
determine_value_of_trade_goods_salt = {
	set_variable = {
		which = base_value_salt
		value = 3
	}
	if = {
		limit = {
			has_chance_scaling_cost = yes
		}
		set_variable = {
			which = chance_modifier_salt
			value = 1
		}
		if = {
			limit = {
				ROOT = {
					OR = {
						has_terrain = desert
						AND = {
							has_terrain = marsh
							NOT = { has_climate = arctic } #Hudson Bay
						}
					}
				}
			}
			multiply_variable = {
				which = chance_modifier_salt
				value = 2
			}
		}
		if = {
			limit = {
				OR = {
					has_increased_trade_goods_discovery = { trade_goods = salt }
					colonial_parent = { has_increased_trade_goods_discovery = { trade_goods = salt } }
				}
			}
			multiply_variable = {
				which = chance_modifier_salt
				value = 2
			}
		}
		if = {
			limit = {
				NOT = {
					is_variable_equal = {
						which = chance_modifier_salt
						value = 0
					}
				}
			}
			divide_variable = {
				which = base_value_salt
				which = chance_modifier_salt
			}
		}
	}
}
determine_value_of_trade_goods_naval_supplies = {
	set_variable = {
		which = base_value_naval_supplies
		value = 2
	}
	if = {
		limit = {
			has_chance_scaling_cost = yes
		}
		set_variable = {
			which = chance_modifier_naval_supplies
			value = 1
		}
		if = {
			limit = {
				ROOT = {
					OR = {
						has_terrain = mountain
						has_terrain = grasslands
					}
				}
			}
			multiply_variable = {
				which = chance_modifier_naval_supplies
				value = 0.5
			}
		}
		if = {
			limit = {
				NOT = { num_of_ports = 1 }
			}
			multiply_variable = {
				which = chance_modifier_naval_supplies
				value = 0.5
			}
		}
		if = {
			limit = {
				ROOT = {
					OR = {
						has_terrain = coastline
						has_climate = tropical
					}
				}
			}
			multiply_variable = {
				which = chance_modifier_naval_supplies
				value = 0.75
			}
		}
		if = {
			limit = {
				ROOT = {
					OR = {
						has_terrain = forest
						has_terrain = woods
						has_terrain = hills
						has_terrain = jungle
					}
				}
			}
			multiply_variable = {
				which = chance_modifier_naval_supplies
				value = 1.5
			}
		}
		if = {
			limit = {
				OR = {
					has_increased_trade_goods_discovery = { trade_goods = naval_supplies }
					colonial_parent = { has_increased_trade_goods_discovery = { trade_goods = naval_supplies } }
				}
			}
			multiply_variable = {
				which = chance_modifier_naval_supplies
				value = 2
			}
		}
		if = {
			limit = {
				NOT = {
					is_variable_equal = {
						which = chance_modifier_naval_supplies
						value = 0
					}
				}
			}
			divide_variable = {
				which = base_value_naval_supplies
				which = chance_modifier_naval_supplies
			}
		}
	}
}
determine_value_of_trade_goods_copper = {
	set_variable = {
		which = base_value_copper
		value = 3
	}
	if = {
		limit = {
			has_chance_scaling_cost = yes
		}
		set_variable = {
			which = chance_modifier_copper
			value = 1
		}
		if = {
			limit = {
				ROOT = {
					is_random_new_world = yes
					OR = {
						has_terrain = mountain
						has_terrain = highlands
					}
				}
			}
			multiply_variable = {
				which = chance_modifier_copper
				value = 1.1
			}
		}
		if = {
			limit = {
				OR = {
					has_increased_trade_goods_discovery = { trade_goods = copper }
					colonial_parent = { has_increased_trade_goods_discovery = { trade_goods = copper } }
				}
			}
			multiply_variable = {
				which = chance_modifier_copper
				value = 2
			}
		}
		if = {
			limit = {
				NOT = {
					is_variable_equal = {
						which = chance_modifier_copper
						value = 0
					}
				}
			}
			divide_variable = {
				which = base_value_copper
				which = chance_modifier_copper
			}
		}
	}
}
determine_value_of_trade_goods_gold = {
	set_variable = {
		which = base_value_gold
		value = 10
	}
	if = {
		limit = {
			#has_chance_scaling_cost = yes
			always = no
		}
		set_variable = {
			which = chance_modifier_gold
			value = 1
		}
		if = {
			limit = {
				ROOT = {
					is_random_new_world = yes
					has_terrain = mountain
					continent = new_world #Always in RNW
				}
			}
			multiply_variable = {
				which = chance_modifier_gold
				value = 1.5
			}
		}
		if = {
			limit = {
				ROOT = {
					normal_or_historical_nations = no
				}
			}
			multiply_variable = {
				which = chance_modifier_gold
				value = 1.5
			}
		}
		if = {
			limit = {
				OR = {
					has_increased_trade_goods_discovery = { trade_goods = gold }
					colonial_parent = { has_increased_trade_goods_discovery = { trade_goods = gold } }
				}
			}
			multiply_variable = {
				which = chance_modifier_gold
				value = 2
			}
		}
		if = {
			limit = {
				ROOT = {
					province_id = 856
				}
			}
			multiply_variable = {
				which = chance_modifier_gold
				value = 100
			}
		}
		if = {
			limit = {
				NOT = {
					is_variable_equal = {
						which = chance_modifier_gold
						value = 0
					}
				}
			}
			divide_variable = {
				which = base_value_gold
				which = chance_modifier_gold
			}
		}
	}
}
determine_value_of_trade_goods_iron = {
	set_variable = {
		which = base_value_iron
		value = 3
	}
	if = {
		limit = {
			has_chance_scaling_cost = yes
		}
		set_variable = {
			which = chance_modifier_iron
			value = 1
		}
		if = {
			limit = {
				ROOT = {
					normal_or_historical_nations = no
					OR = {
						has_terrain = mountain
						has_terrain = hills
						has_terrain = highlands
					}
				}
			}
			multiply_variable = {
				which = chance_modifier_iron
				value = 1.2
			}
		}
		if = {
			limit = {
				ROOT = {
					province_id = 990
				}
			}
			multiply_variable = {
				which = chance_modifier_iron
				value = 20
			}
		}
		if = {
			limit = {
				NOT = {
					is_variable_equal = {
						which = chance_modifier_iron
						value = 0
					}
				}
			}
			divide_variable = {
				which = base_value_iron
				which = chance_modifier_iron
			}
		}
	}
}
determine_value_of_trade_goods_slaves = {
	set_variable = {
		which = base_value_slaves
		value = 2
	}
	if = {
		limit = {
			has_chance_scaling_cost = yes
		}
		set_variable = {
			which = chance_modifier_slaves
			value = 1
		}
		if = {
			limit = {
				has_country_flag = encourage_cash_crops_flag
			}
			multiply_variable = {
				which = chance_modifier_slaves
				value = 2
			}
		}
		if = {
			limit = {
				OR = {
					has_increased_trade_goods_discovery = { trade_goods = slaves }
					colonial_parent = { has_increased_trade_goods_discovery = { trade_goods = slaves } }
				}
			}
			multiply_variable = {
				which = chance_modifier_slaves
				value = 2
			}
		}
		if = {
			limit = {
				NOT = {
					is_variable_equal = {
						which = chance_modifier_slaves
						value = 0
					}
				}
			}
			divide_variable = {
				which = base_value_slaves
				which = chance_modifier_slaves
			}
		}
	}
}
determine_value_of_trade_goods_ivory = {
	set_variable = {
		which = base_value_ivory
		value = 4
	}
	if = {
		limit = {
			has_chance_scaling_cost = yes
		}
		set_variable = {
			which = chance_modifier_ivory
			value = 1
		}
		if = {
			limit = {
				ROOT = {
					OR = {
						has_terrain = jungle
						has_terrain = savannah
					}
				}
			}
			multiply_variable = {
				which = chance_modifier_ivory
				value = 1.25
			}
		}
		if = {
			limit = {
				has_country_flag = encourage_cash_crops_flag
			}
			multiply_variable = {
				which = chance_modifier_ivory
				value = 2
			}
		}
		if = {
			limit = {
				OR = {
					has_increased_trade_goods_discovery = { trade_goods = ivory }
					colonial_parent = { has_increased_trade_goods_discovery = { trade_goods = ivory } }
				}
			}
			multiply_variable = {
				which = chance_modifier_ivory
				value = 2
			}
		}
		if = {
			limit = {
				NOT = {
					is_variable_equal = {
						which = chance_modifier_ivory
						value = 0
					}
				}
			}
			divide_variable = {
				which = base_value_ivory
				which = chance_modifier_ivory
			}
		}
	}
}
determine_value_of_trade_goods_tea = {
	set_variable = {
		which = base_value_tea
		value = 3
	}
	if = {
		limit = {
			has_chance_scaling_cost = yes
		}
		set_variable = {
			which = chance_modifier_tea
			value = 1
		}
		if = {
			limit = {
				ROOT = {
					has_terrain = farmlands
				}
			}
			multiply_variable = {
				which = chance_modifier_tea
				value = 1.2
			}
		}
		if = {
			limit = {
				OR = {
					has_increased_trade_goods_discovery = { trade_goods = tea }
					colonial_parent = { has_increased_trade_goods_discovery = { trade_goods = tea } }
				}
			}
			multiply_variable = {
				which = chance_modifier_tea
				value = 2
			}
		}
		if = {
			limit = {
				has_country_flag = encourage_cash_crops_flag
			}
			multiply_variable = {
				which = chance_modifier_tea
				value = 2
			}
		}
		if = {
			limit = {
				NOT = {
					is_variable_equal = {
						which = chance_modifier_tea
						value = 0
					}
				}
			}
			divide_variable = {
				which = base_value_tea
				which = chance_modifier_tea
			}
		}
	}
}
determine_value_of_trade_goods_chinaware = {
	set_variable = {
		which = base_value_chinaware
		value = 3
	}
	if = {
		limit = {
			has_chance_scaling_cost = yes
		}
		set_variable = {
			which = chance_modifier_chinaware
			value = 1
		}
		if = {
			limit = {
				has_country_flag = encourage_cash_crops_flag
			}
			multiply_variable = {
				which = chance_modifier_chinaware
				value = 2
			}
		}
		if = {
			limit = {
				OR = {
					has_increased_trade_goods_discovery = { trade_goods = chinaware }
					colonial_parent = { has_increased_trade_goods_discovery = { trade_goods = chinaware } }
				}
			}
			multiply_variable = {
				which = chance_modifier_chinaware
				value = 2
			}
		}
		if = {
			limit = {
				NOT = {
					is_variable_equal = {
						which = chance_modifier_chinaware
						value = 0
					}
				}
			}
			divide_variable = {
				which = base_value_chinaware
				which = chance_modifier_chinaware
			}
		}
	}
}
determine_value_of_trade_goods_spices = {
	set_variable = {
		which = base_value_spices
		value = 3
	}
	if = {
		limit = {
			has_chance_scaling_cost = yes
		}
		set_variable = {
			which = chance_modifier_spices
			value = 1
		}
		if = {
			limit = {
				has_country_flag = encourage_cash_crops_flag
			}
			multiply_variable = {
				which = chance_modifier_spices
				value = 2
			}
		}
		if = {
			limit = {
				OR = {
					has_increased_trade_goods_discovery = { trade_goods = spices }
					colonial_parent = { has_increased_trade_goods_discovery = { trade_goods = spices } }
				}
			}
			multiply_variable = {
				which = chance_modifier_spices
				value = 2
			}
		}
		if = {
			limit = {
				NOT = {
					is_variable_equal = {
						which = chance_modifier_spices
						value = 0
					}
				}
			}
			divide_variable = {
				which = base_value_spices
				which = chance_modifier_spices
			}
		}
	}
}
determine_value_of_trade_goods_coffee = {
	set_variable = {
		which = base_value_coffee
		value = 3
	}
	if = {
		limit = {
			has_chance_scaling_cost = yes
		}
		set_variable = {
			which = chance_modifier_coffee
			value = 1
		}
		if = {
			limit = {
				has_country_flag = encourage_cash_crops_flag
			}
			multiply_variable = {
				which = chance_modifier_coffee
				value = 2
			}
		}
		if = {
			limit = {
				OR = {
					has_increased_trade_goods_discovery = { trade_goods = coffee }
					colonial_parent = { has_increased_trade_goods_discovery = { trade_goods = coffee } }
				}
			}
			multiply_variable = {
				which = chance_modifier_coffee
				value = 2
			}
		}
		if = {
			limit = {
				NOT = {
					is_variable_equal = {
						which = chance_modifier_coffee
						value = 0
					}
				}
			}
			divide_variable = {
				which = base_value_coffee
				which = chance_modifier_coffee
			}
		}
	}
}
determine_value_of_trade_goods_cotton = {
	set_variable = {
		which = base_value_cotton
		value = 3
	}
	if = {
		limit = {
			has_chance_scaling_cost = yes
		}
		set_variable = {
			which = chance_modifier_cotton
			value = 1
		}
		if = {
			limit = {
				has_country_flag = encourage_cash_crops_flag
			}
			multiply_variable = {
				which = chance_modifier_cotton
				value = 2
			}
		}
		if = {
			limit = {
				OR = {
					has_increased_trade_goods_discovery = { trade_goods = cotton }
					colonial_parent = { has_increased_trade_goods_discovery = { trade_goods = cotton } }
				}
			}
			multiply_variable = {
				which = chance_modifier_cotton
				value = 2
			}
		}
		if = {
			limit = {
				NOT = {
					is_variable_equal = {
						which = chance_modifier_cotton
						value = 0
					}
				}
			}
			divide_variable = {
				which = base_value_cotton
				which = chance_modifier_cotton
			}
		}
	}
}
determine_value_of_trade_goods_sugar = {
	set_variable = {
		which = base_value_sugar
		value = 3
	}
	if = {
		limit = {
			has_chance_scaling_cost = yes
		}
		set_variable = {
			which = chance_modifier_sugar
			value = 1
		}
		if = {
			limit = {
				has_country_flag = encourage_cash_crops_flag
			}
			multiply_variable = {
				which = chance_modifier_sugar
				value = 2
			}
		}
		if = {
			limit = {
				OR = {
					has_increased_trade_goods_discovery = { trade_goods = sugar }
					colonial_parent = { has_increased_trade_goods_discovery = { trade_goods = sugar } }
				}
			}
			multiply_variable = {
				which = chance_modifier_sugar
				value = 2
			}
		}
		if = {
			limit = {
				NOT = {
					is_variable_equal = {
						which = chance_modifier_sugar
						value = 0
					}
				}
			}
			divide_variable = {
				which = base_value_sugar
				which = chance_modifier_sugar
			}
		}
	}
}
determine_value_of_trade_goods_tobacco = {
	set_variable = {
		which = base_value_tobacco
		value = 3
	}
	if = {
		limit = {
			has_chance_scaling_cost = yes
		}
		set_variable = {
			which = chance_modifier_tobacco
			value = 1
		}
		if = {
			limit = {
				has_country_flag = encourage_cash_crops_flag
			}
			multiply_variable = {
				which = chance_modifier_tobacco
				value = 2
			}
		}
		if = {
			limit = {
				OR = {
					has_increased_trade_goods_discovery = { trade_goods = tobacco }
					colonial_parent = { has_increased_trade_goods_discovery = { trade_goods = tobacco } }
				}
			}
			multiply_variable = {
				which = chance_modifier_tobacco
				value = 2
			}
		}
		if = {
			limit = {
				NOT = {
					is_variable_equal = {
						which = chance_modifier_tobacco
						value = 0
					}
				}
			}
			divide_variable = {
				which = base_value_tobacco
				which = chance_modifier_tobacco
			}
		}
	}
}
determine_value_of_trade_goods_cocoa = {
	set_variable = {
		which = base_value_cocoa
		value = 4
	}
	if = {
		limit = {
			has_chance_scaling_cost = yes
		}
		set_variable = {
			which = chance_modifier_cocoa
			value = 1
		}
		if = {
			limit = {
				OR = {
					has_increased_trade_goods_discovery = { trade_goods = cocoa }
					colonial_parent = { has_increased_trade_goods_discovery = { trade_goods = cocoa } }
				}
			}
			multiply_variable = {
				which = chance_modifier_cocoa
				value = 2
			}
		}
		if = {
			limit = {
				NOT = {
					is_variable_equal = {
						which = chance_modifier_cocoa
						value = 0
					}
				}
			}
			divide_variable = {
				which = base_value_cocoa
				which = chance_modifier_cocoa
			}
		}
	}
}
determine_value_of_trade_goods_silk = {
	set_variable = {
		which = base_value_silk
		value = 4
	}
	if = {
		limit = {
			has_chance_scaling_cost = yes
		}
		set_variable = {
			which = chance_modifier_silk
			value = 1
		}
		if = {
			limit = {
				has_country_flag = encourage_cash_crops_flag
			}
			multiply_variable = {
				which = chance_modifier_silk
				value = 2
			}
		}
		if = {
			limit = {
				OR = {
					has_increased_trade_goods_discovery = { trade_goods = silk }
					colonial_parent = { has_increased_trade_goods_discovery = { trade_goods = silk } }
				}
			}
			multiply_variable = {
				which = chance_modifier_silk
				value = 2
			}
		}
		if = {
			limit = {
				NOT = {
					is_variable_equal = {
						which = chance_modifier_silk
						value = 0
					}
				}
			}
			divide_variable = {
				which = base_value_silk
				which = chance_modifier_silk
			}
		}
	}
}
determine_value_of_trade_goods_dyes = {
	set_variable = {
		which = base_value_dyes
		value = 4
	}
	if = {
		limit = {
			has_chance_scaling_cost = yes
		}
		set_variable = {
			which = chance_modifier_dyes
			value = 1
		}
		if = {
			limit = {
				has_country_flag = encourage_cash_crops_flag
			}
			multiply_variable = {
				which = chance_modifier_dyes
				value = 2
			}
		}
		if = {
			limit = {
				OR = {
					has_increased_trade_goods_discovery = { trade_goods = dyes }
					colonial_parent = { has_increased_trade_goods_discovery = { trade_goods = dyes } }
				}
			}
			multiply_variable = {
				which = chance_modifier_dyes
				value = 2
			}
		}
		if = {
			limit = {
				NOT = {
					is_variable_equal = {
						which = chance_modifier_dyes
						value = 0
					}
				}
			}
			divide_variable = {
				which = base_value_dyes
				which = chance_modifier_dyes
			}
		}
	}
}
determine_value_of_trade_goods_tropical_wood = {
	set_variable = {
		which = base_value_tropical_wood
		value = 2
	}
	if = {
		limit = {
			has_chance_scaling_cost = yes
		}
		set_variable = {
			which = chance_modifier_tropical_wood
			value = 1
		}
		if = {
			limit = {
				has_country_flag = encourage_cash_crops_flag
			}
			multiply_variable = {
				which = chance_modifier_tropical_wood
				value = 2
			}
		}
		if = {
			limit = {
				OR = {
					has_increased_trade_goods_discovery = { trade_goods = tropical_wood }
					colonial_parent = { has_increased_trade_goods_discovery = { trade_goods = tropical_wood } }
				}
			}
			multiply_variable = {
				which = chance_modifier_tropical_wood
				value = 2
			}
		}
		if = {
			limit = {
				NOT = {
					is_variable_equal = {
						which = chance_modifier_tropical_wood
						value = 0
					}
				}
			}
			divide_variable = {
				which = base_value_tropical_wood
				which = chance_modifier_tropical_wood
			}
		}
	}
}
determine_value_of_trade_goods_livestock = {
	set_variable = {
		which = base_value_livestock
		value = 2
	}
	if = {
		limit = {
			has_chance_scaling_cost = yes
		}
		set_variable = {
			which = chance_modifier_livestock
			value = 1
		}
		if = {
			limit = {
				ROOT = {
					province_id = 2002
				}
			}
			multiply_variable = {
				which = chance_modifier_livestock
				value = 0.05
			}
		}
		if = {
			limit = {
				ROOT = {
					has_winter = severe_winter
				}
			}
			multiply_variable = {
				which = chance_modifier_livestock
				value = 0.75
			}
		}
		if = {
			limit = {
				ROOT = {
					OR = {
						has_terrain = desert
						has_terrain = savannah
						has_terrain = highlands
						has_terrain = drylands
						has_climate = arid
					}
				}
			}
			multiply_variable = {
				which = chance_modifier_livestock
				value = 1.25
			}
		}
		if = {
			limit = {
				ROOT = {
					has_terrain = steppe
				}
			}
			multiply_variable = {
				which = chance_modifier_livestock
				value = 1.5
			}
		}
		if = {
			limit = {
				OR = {
					has_increased_trade_goods_discovery = { trade_goods = livestock }
					colonial_parent = { has_increased_trade_goods_discovery = { trade_goods = livestock } }
				}
			}
			multiply_variable = {
				which = chance_modifier_livestock
				value = 2
			}
		}
		if = {
			limit = {
				NOT = {
					is_variable_equal = {
						which = chance_modifier_livestock
						value = 0
					}
				}
			}
			divide_variable = {
				which = base_value_livestock
				which = chance_modifier_livestock
			}
		}
	}
}
determine_value_of_trade_goods_incense = {
	set_variable = {
		which = base_value_incense
		value = 2.5
	}
	if = {
		limit = {
			has_chance_scaling_cost = yes
		}
		set_variable = {
			which = chance_modifier_incense
			value = 1
		}
		if = {
			limit = {
				has_country_flag = encourage_cash_crops_flag
			}
			multiply_variable = {
				which = chance_modifier_incense
				value = 2
			}
		}
		if = {
			limit = {
				OR = {
					has_increased_trade_goods_discovery = { trade_goods = incense }
					colonial_parent = { has_increased_trade_goods_discovery = { trade_goods = incense } }
				}
			}
			multiply_variable = {
				which = chance_modifier_incense
				value = 2
			}
		}
		if = {
			limit = {
				NOT = {
					is_variable_equal = {
						which = chance_modifier_incense
						value = 0
					}
				}
			}
			divide_variable = {
				which = base_value_incense
				which = chance_modifier_incense
			}
		}
	}
}
determine_value_of_trade_goods_glass = {
	set_variable = {
		which = base_value_glass
		value = 3
	}
	if = {
		limit = {
			has_chance_scaling_cost = yes
		}
		set_variable = {
			which = chance_modifier_glass
			value = 1
		}
		if = {
			limit = {
				ROOT = {
					development_discounting_tribal = 22
				}
			}
			multiply_variable = {
				which = chance_modifier_glass
				value = 2
			}
		}
		if = {
			limit = {
				OR = {
					has_increased_trade_goods_discovery = { trade_goods = glass }
					colonial_parent = { has_increased_trade_goods_discovery = { trade_goods = glass } }
				}
			}
			multiply_variable = {
				which = chance_modifier_glass
				value = 2
			}
		}
		if = {
			limit = {
				NOT = {
					is_variable_equal = {
						which = chance_modifier_glass
						value = 0
					}
				}
			}
			divide_variable = {
				which = base_value_glass
				which = chance_modifier_glass
			}
		}
	}
}
determine_value_of_trade_goods_paper = {
	set_variable = {
		which = base_value_paper
		value = 3.5
	}
	if = {
		limit = {
			has_chance_scaling_cost = yes
		}
		set_variable = {
			which = chance_modifier_paper
			value = 1
		}
		if = {
			limit = {
				ROOT = {
					development_discounting_tribal = 22
				}
			}
			multiply_variable = {
				which = chance_modifier_paper
				value = 2
			}
		}
		if = {
			limit = {
				OR = {
					has_increased_trade_goods_discovery = { trade_goods = paper }
					colonial_parent = { has_increased_trade_goods_discovery = { trade_goods = paper } }
				}
			}
			multiply_variable = {
				which = chance_modifier_paper
				value = 2
			}
		}
		if = {
			limit = {
				NOT = {
					is_variable_equal = {
						which = chance_modifier_paper
						value = 0
					}
				}
			}
			divide_variable = {
				which = base_value_paper
				which = chance_modifier_paper
			}
		}
	}
}
determine_value_of_trade_goods_gems = {
	set_variable = {
		which = base_value_gems
		value = 4
	}
	if = {
		limit = {
			has_chance_scaling_cost = yes
		}
		set_variable = {
			which = chance_modifier_gems
			value = 1
		}
		if = {
			limit = {
				ROOT = {
					OR = {
						has_terrain = mountain
						has_terrain = jungle
						has_terrain = hills
						has_terrain = highlands
						has_terrain = coastline #Pearls
					}
				}
			}
			multiply_variable = {
				which = chance_modifier_gems
				value = 1.5
			}
		}
		if = {
			limit = {
				ROOT = {
					is_random_new_world = yes
					has_terrain = mountain
					continent = new_world #Always in RNW
				}
			}
			multiply_variable = {
				which = chance_modifier_gems
				value = 1.5
			}
		}
		if = {
			limit = {
				ROOT = {
					normal_or_historical_nations = no
				}
			}
			multiply_variable = {
				which = chance_modifier_gems
				value = 1.5
			}
		}
		if = {
			limit = {
				has_country_flag = encourage_cash_crops_flag
			}
			multiply_variable = {
				which = chance_modifier_gems
				value = 1.5
			}
		}
		if = {
			limit = {
				OR = {
					has_increased_trade_goods_discovery = { trade_goods = gems }
					colonial_parent = { has_increased_trade_goods_discovery = { trade_goods = gems } }
				}
			}
			multiply_variable = {
				which = chance_modifier_gems
				value = 1.5
			}
		}
		if = {
			limit = {
				NOT = {
					is_variable_equal = {
						which = chance_modifier_gems
						value = 0
					}
				}
			}
			divide_variable = {
				which = base_value_gems
				which = chance_modifier_gems
			}
		}
	}
}
determine_value_of_trade_goods_coal = {
	set_variable = {
		which = base_value_coal
		value = 10
	}
	if = {
		limit = {
			#has_chance_scaling_cost = yes
			always = no
		}
		set_variable = {
			which = chance_modifier_coal
			value = 1
		}
		if = {
			limit = {
				NOT = {
					is_variable_equal = {
						which = chance_modifier_coal
						value = 0
					}
				}
			}
			divide_variable = {
				which = base_value_coal
				which = chance_modifier_coal
			}
		}
	}
}
determine_value_of_trade_goods_cloves = {
	set_variable = {
		which = base_value_cloves
		value = 8
	}
	if = {
		limit = {
			has_chance_scaling_cost = yes
		}
		set_variable = {
			which = chance_modifier_cloves
			value = 1
		}
		if = {
			limit = {
				has_country_flag = encourage_cash_crops_flag
			}
			multiply_variable = {
				which = chance_modifier_cloves
				value = 2
			}
		}
		if = {
			limit = {
				OR = {
					has_increased_trade_goods_discovery = { trade_goods = cloves }
					colonial_parent = { has_increased_trade_goods_discovery = { trade_goods = cloves } }
				}
			}
			multiply_variable = {
				which = chance_modifier_cloves
				value = 2
			}
		}
		if = {
			limit = {
				NOT = {
					is_variable_equal = {
						which = chance_modifier_cloves
						value = 0
					}
				}
			}
			divide_variable = {
				which = base_value_cloves
				which = chance_modifier_cloves
			}
		}
	}
}
determine_value_of_trade_goods_unknown = {
	set_variable = {
		which = base_value_unknown
		value = 0
	}
}

# The design behind it is the following:
# 1. You colonize a province
# 2. A pop-up event appears which gives you the choice to select the trade good for the province
# 3. Every trade good has an own base price assigned to them. This base price should be their base value * 5 Ducats.
# 4. Trade goods above 3 value also cost ADM power.
# 5. Every time you select a certain trade good, the price increases
# 6. The new price is calculated with this formula: (1 + (times you upgraded it)) * 5 (base trade good price)
# 7. ADM costs are calculated as follows: (base trade good pirce - 2.5) * 25 * (times YOU upgraded it) as long (base trade good pirce - 2.5) => 0
# 7. Gold will be counted as having a trade value of 10 Ducats so not all of the whole new world becomes one huge gold cluster

calculate_trade_goods_price = {
	owner = {
		determine_value_of_trade_goods_$trade_goods$ = yes
		set_variable = {
			which = final_ducat_price_$trade_goods$
			value = 1
		}
		set_variable = {
			which = final_adm_cost_$trade_goods$
			which = base_value_$trade_goods$
		}
		subtract_variable = {
			which = final_adm_cost_$trade_goods$
			value = 2.5
		}
		multiply_variable = {
			which = final_adm_cost_$trade_goods$
			value = 5
		}
		#Determine price increase on your own
		if = {
			limit = { has_country_flag = ever_selected_$trade_goods$ }
			change_variable = {
				which = final_ducat_price_$trade_goods$
				which = ducat_cost_$trade_goods$_own_counter
			}
			if = {
				limit = {
					check_variable = {
						which = final_adm_cost_$trade_goods$
						value = 1
					}
				}
				multiply_variable = {
					which = final_adm_cost_$trade_goods$
					which = ducat_cost_$trade_goods$_own_counter
				}
			}
		}
		multiply_variable = {
			which = final_ducat_price_$trade_goods$
			value = 10
		}
		multiply_variable = {
			which = final_ducat_price_$trade_goods$
			which = base_value_$trade_goods$
		}
	}
}

purchase_trade_goods = {
	custom_tooltip = ducat_price_for_$trade_goods$_tt
	if = {
		limit = {
			owner = {
				check_variable = {
					which = final_adm_cost_$trade_goods$
					value = 1
				}
			}
		}
		custom_tooltip = adm_price_for_$trade_goods$_tt
	}
	hidden_effect = {
		owner = {
			if = {
				limit = { NOT = { has_country_flag = ever_selected_$trade_goods$ } }
				set_country_flag = ever_selected_$trade_goods$
				set_variable = {
					which = ducat_cost_$trade_goods$_own_counter
					value = 1
				}
			}
			else = {
				change_variable = {
					which = ducat_cost_$trade_goods$_own_counter
					value = 1
				}
			}
			while = {
				limit = {
					check_variable = {
						which = final_ducat_price_$trade_goods$
						value = 1
					}
				}
				add_treasury = -1
				subtract_variable = {
					which = final_ducat_price_$trade_goods$
					value = 1
				}
			}
			if = {
				limit = {
					check_variable = {
						which = final_adm_cost_$trade_goods$
						value = 1
					}
				}
				while = {
					limit = {
						check_variable = {
							which = final_adm_cost_$trade_goods$
							value = 1
						}
					}
					add_adm_power = -1
					subtract_variable = {
						which = final_adm_cost_$trade_goods$
						value = 1
					}
				}
			}
		}
	}
	change_trade_goods = $trade_goods$
}